<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Application Framework API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td><img src="SiliconLabsLogo_Black.jpg" style="padding: 10px;width:40%;height:40%;" /></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Application Framework API Reference
   &#160;<span id="projectnumber">Ember ZigBee RF4CE Application Framework</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__rf4ce-zrc11.htm','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ZigBee Remote Control 1.1 Profile</div>  </div>
<div class="ingroups"><a class="el" href="group__rf4ce__framework.htm">Ember ZigBee RF4CE API Reference</a></div></div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0dd7036690513fcd3925ca96421d1816"><td class="memItemLeft" align="right" valign="top">EmberStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf4ce-zrc11.htm#ga0dd7036690513fcd3925ca96421d1816">emberAfRf4ceZrc11Discovery</a> (EmberPanId panId, EmberNodeId nodeId, <a class="el" href="rf4ce-profile-types_8h.htm#aa1e0d4fb0b19d3b2a3a1b5d69df3b0e4">EmberAfRf4ceDeviceType</a> searchDevType)</td></tr>
<tr class="separator:ga0dd7036690513fcd3925ca96421d1816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2ef424b5a88506419a431712daabd49"><td class="memItemLeft" align="right" valign="top">EmberStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf4ce-zrc11.htm#gaf2ef424b5a88506419a431712daabd49">emberAfRf4ceZrc11EnableAutoDiscoveryResponse</a> (void)</td></tr>
<tr class="separator:gaf2ef424b5a88506419a431712daabd49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga65153e07ce05e67976e9f8f13d1b724d"><td class="memItemLeft" align="right" valign="top">EmberStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf4ce-zrc11.htm#ga65153e07ce05e67976e9f8f13d1b724d">emberAfRf4ceZrc11UserControlPress</a> (uint8_t pairingIndex, <a class="el" href="rf4ce-zrc11-types_8h.htm#a6e5718845bb4b7b6b003b59c1c65fdd8">EmberAfRf4ceUserControlCode</a> rcCommandCode, const uint8_t *rcCommandPayload, uint8_t rcCommandPayloadLength, bool atomic)</td></tr>
<tr class="separator:ga65153e07ce05e67976e9f8f13d1b724d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga082ee7491f7836cd19e26a41292feada"><td class="memItemLeft" align="right" valign="top">EmberStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf4ce-zrc11.htm#ga082ee7491f7836cd19e26a41292feada">emberAfRf4ceZrc11UserControlRelease</a> (uint8_t pairingIndex, <a class="el" href="rf4ce-zrc11-types_8h.htm#a6e5718845bb4b7b6b003b59c1c65fdd8">EmberAfRf4ceUserControlCode</a> rcCommandCode)</td></tr>
<tr class="separator:ga082ee7491f7836cd19e26a41292feada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d27616dee38763a5d3e9ac00c3fe964"><td class="memItemLeft" align="right" valign="top">EmberStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf4ce-zrc11.htm#ga8d27616dee38763a5d3e9ac00c3fe964">emberAfRf4ceZrc11CommandDiscoveryRequest</a> (uint8_t pairingIndex)</td></tr>
<tr class="separator:ga8d27616dee38763a5d3e9ac00c3fe964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69abf6654666d0e2ed81a439905f9e3c"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rf4ce-zrc11.htm#ga69abf6654666d0e2ed81a439905f9e3c">emberAfRf4ceZrcCommandsSupportedContents</a> (<a class="el" href="structEmberAfRf4ceZrcCommandsSupported.htm">EmberAfRf4ceZrcCommandsSupported</a> *commandsSupported)</td></tr>
<tr class="separator:ga69abf6654666d0e2ed81a439905f9e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The ZigBee Remote Control 1.1 (ZRC1.1) plugin implements the ZRC1.1 profile. The profile describes a simple discovery and pairing procedure for joining devices and a simple user control procedure for controlling devices via HDMI-CEC UI commands. The plugin manages these procedures for both originators and recipients. Note that this plugin implements version 1.1 of the ZRC profile. Version 1.1 devices are fully interoperable with version 1.0 devices. (ZRC1.0 was also known as the Consumer Electronics Remote Control (CERC) profile.) As required by the specification, this plugin sends ZRC1.1-formatted messages and receives both ZRC1.0- and ZRC1.1- formatted messages.</p>
<p>This plugin supports originators and recipients. Originators send user control messages to recipients after pairing with them. Originators are most typically controllers but may also be targets. Recipients must be targets. Both originators and recipients must start general network operations before beginning ZRC-specific operations. Network operations should be started by calling <a class="el" href="group__rf4ce-profile.htm#ga8273f29ea6ef5a79f0da3e64f9b0afbd" title="Start the RF4CE network operations.">emberAfRf4ceStart</a> in the <a class="el" href="group__rf4ce-profile.htm">RF4CE Profile Support</a> plugin.</p>
<p>Once network operations have started, ZRC1.1 originators can initiate the discovery and pairing procedure by calling <a class="el" href="group__rf4ce-zrc11.htm#ga0dd7036690513fcd3925ca96421d1816" title="Initiate the pairing procedure for an originator.">emberAfRf4ceZrc11Discovery</a> with the appropriate discovery parameters. The plugin will first perform discovery for matching targets in range. If exactly one target is identified, the plugin will then continue to the pairing procedure. At the conclusion of the discovery and pairing procedure, the plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#gabb117d30da5543fe55f23f8df8fe421a" title="Pairing Complete.">emberAfPluginRf4ceZrc11PairingCompleteCallback</a> to indicate whether pairing completed successfully with a target and, if so, which pairing index has been assigned to that target.</p>
<p>Recipients can initiate the discovery and pairing procedure by calling <a class="el" href="group__rf4ce-zrc11.htm#gaf2ef424b5a88506419a431712daabd49" title="Initiate the pairing procedure for a recipient.">emberAfRf4ceZrc11EnableAutoDiscoveryResponse</a>. This will put the node into auto discovery mode for a fixed duration of time. During this time, the stack will automatically respond to discovery requests from originators that match the configuration of this device. If an originator discovers this device, the plugin will then wait for a pair request from the same originator. When the process completes, the plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#gabb117d30da5543fe55f23f8df8fe421a" title="Pairing Complete.">emberAfPluginRf4ceZrc11PairingCompleteCallback</a> to indicate whether pairing completed successfully with an originator and, if so, which pairing index has been assigned to that originator.</p>
<p>Following a successful discovery and pairing, originators may send user control messages to targets by calling <a class="el" href="group__rf4ce-zrc11.htm#ga65153e07ce05e67976e9f8f13d1b724d" title="Send indications of user control presses and repeats to a pairing index.">emberAfRf4ceZrc11UserControlPress</a>. In response, the plugin will transmit a user control press message to the indicated target with the HDMI-CEC command code and payload. If the press is atomic, the plugin performs no additional processing. Otherwise, the plugin will repeatedly transmit user control repeat messages at fixed intervals until <a class="el" href="group__rf4ce-zrc11.htm#ga082ee7491f7836cd19e26a41292feada" title="Send indications of user control release to a pairing index.">emberAfRf4ceZrc11UserControlRelease</a> is called. The interval at which user control repeat messages are transmitted is configurable in the plugin options.</p>
<p>For targets, the plugin will keep track of incoming user control messages. Each time a user control press command is received, the plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#ga21130a1aca4b3debf84cdbb49fd2b5c7" title="User Control.">emberAfPluginRf4ceZrc11UserControlCallback</a> with its HDMI-CEC command code and payload. The plugin will then wait for a fixed duration for a corresponding user control repeat or release messages. If a user control repeat message is received within the timeout, the plugin will reset its timer and wait for the next message. If a user control repeat message is not received within the timeout or if a user control release is received, the plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#ga21130a1aca4b3debf84cdbb49fd2b5c7" title="User Control.">emberAfPluginRf4ceZrc11UserControlCallback</a> with an indication that the user control has stopped. The timeout for receiving repeat messages is configurable in the plugin options. Note that the plugin will not call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#ga21130a1aca4b3debf84cdbb49fd2b5c7" title="User Control.">emberAfPluginRf4ceZrc11UserControlCallback</a> for repeat messages that follow a press message.</p>
<p>The plugin is capable of keeping track of a fixed number of simultaneous incoming and outgoing user control messages. The limits are configurable in the plugin options.</p>
<p>Originators and recipients may each perform command discovery to determine which user control codes are supported by the paired node. This is done by calling <a class="el" href="group__rf4ce-zrc11.htm#ga8d27616dee38763a5d3e9ac00c3fe964" title="Send a command discovery request to a pairing index.">emberAfRf4ceZrc11CommandDiscoveryRequest</a>. Once command discovery completes, the plugin calls <a class="el" href="group__rf4ce-zrc11-callbacks.htm#ga01f3609b3e82d202ead39da11054aaaf" title="Command Discovery Response.">emberAfPluginRf4ceZrc11CommandDiscoveryResponseCallback</a> with the results. If this node receives a command discovery request, it will automatically respond with the list of HDMI-CEC command codes that the device supports. The supported command codes are configurable in AppBuilder.</p>
<p>This plugin manages the state of the receiver by calling <a class="el" href="group__rf4ce-profile.htm#gab5ce4aceb169618beb9d7c0b4b2760bb" title="Enable or disable the receiver for the given profile.">emberAfRf4ceRxEnable</a> using <a class="el" href="rf4ce-profile-types_8h.htm#a3b0333ab61ac480d936d7fa3d862df98a73a232e7d0b1784e605906231fc7b199">EMBER_AF_RF4CE_PROFILE_REMOTE_CONTROL_1_1</a> as the profile id. If the application also wishes to manage the receiver, it should do so using <a class="el" href="rf4ce-profile-types_8h.htm#a3b0333ab61ac480d936d7fa3d862df98ae6abea877d013ee547116399d7ecc9f3">EMBER_AF_RF4CE_PROFILE_WILDCARD</a> as the profile id or by calling <a class="el" href="group__rf4ce-profile.htm#ga1ef759d8fcf407c0035f651ec3f66c09" title="Set the power-saving parameters.">emberAfRf4ceSetPowerSavingParameters</a>.</p>
<p>This plugin utilizes the discovery, pairing, sending and receiving, and power-saving functionality provided by the <a class="el" href="group__rf4ce-profile.htm">RF4CE Profile Support</a> plugin. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga0dd7036690513fcd3925ca96421d1816"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EmberStatus emberAfRf4ceZrc11Discovery </td>
          <td>(</td>
          <td class="paramtype">EmberPanId&#160;</td>
          <td class="paramname"><em>panId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>nodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rf4ce-profile-types_8h.htm#aa1e0d4fb0b19d3b2a3a1b5d69df3b0e4">EmberAfRf4ceDeviceType</a>&#160;</td>
          <td class="paramname"><em>searchDevType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiate the pairing procedure for an originator. </p>
<p>The plugin begins the pairing procedure by searching for a potential target with which to pair. If exactly one target is found, the plugin will attempt to pair with it. If no targets or more than one target is found, the pairing will fail, as required by the ZRC1.x specification. The plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#gabb117d30da5543fe55f23f8df8fe421a" title="Pairing Complete.">emberAfPluginRf4ceZrc11PairingCompleteCallback</a> with the results of the pairing procedure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">panId</td><td>The pan id to search or ::EMBER_RF4CE_BROADCAST_PAN_ID. </td></tr>
    <tr><td class="paramname">nodeId</td><td>The node id for which to search or ::EMBER_RF4CE_BROADCAST_ADDRESS. </td></tr>
    <tr><td class="paramname">searchDevType</td><td>The device type for which to search or <a class="el" href="rf4ce-profile-types_8h.htm#aa1e0d4fb0b19d3b2a3a1b5d69df3b0e4ac55286124a5455cee0500830195db460">EMBER_AF_RF4CE_DEVICE_TYPE_WILDCARD</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ::EmberStatus value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf2ef424b5a88506419a431712daabd49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EmberStatus emberAfRf4ceZrc11EnableAutoDiscoveryResponse </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiate the pairing procedure for a recipient. </p>
<p>The plugin performs the binding procedure by enabling auto discovery mode. The plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#gabb117d30da5543fe55f23f8df8fe421a" title="Pairing Complete.">emberAfPluginRf4ceZrc11PairingCompleteCallback</a> with the results of the pairing. This function may only be called on a target device.</p>
<dl class="section return"><dt>Returns</dt><dd>An ::EmberStatus value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a class="anchor" id="ga65153e07ce05e67976e9f8f13d1b724d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EmberStatus emberAfRf4ceZrc11UserControlPress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pairingIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rf4ce-zrc11-types_8h.htm#a6e5718845bb4b7b6b003b59c1c65fdd8">EmberAfRf4ceUserControlCode</a>&#160;</td>
          <td class="paramname"><em>rcCommandCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>rcCommandPayload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rcCommandPayloadLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>atomic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send indications of user control presses and repeats to a pairing index. </p>
<p>This function can be called when a user control has been pressed and an indication of this should be sent to a target. If the user control should be repeated, the plugin will automatically send user control repeat messages at fixed intervals according to the plugin configuration. Every call to this function for a repeatable user control should be followed by a call to <a class="el" href="group__rf4ce-zrc11.htm#ga082ee7491f7836cd19e26a41292feada" title="Send indications of user control release to a pairing index.">emberAfRf4ceZrc11UserControlRelease</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pairingIndex</td><td>The pairing index to which to send user control messages. </td></tr>
    <tr><td class="paramname">rcCommandCode</td><td>The RC command code of the user control. </td></tr>
    <tr><td class="paramname">rcCommandPayload</td><td>The optional RC command payload of the user control. </td></tr>
    <tr><td class="paramname">rcCommandPayloadLength</td><td>The length of the optional RC command payload of the user control. </td></tr>
    <tr><td class="paramname">atomic</td><td>true if the user control is atomic or false if it should repeat.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ::EmberStatus value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a class="anchor" id="ga082ee7491f7836cd19e26a41292feada"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EmberStatus emberAfRf4ceZrc11UserControlRelease </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pairingIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rf4ce-zrc11-types_8h.htm#a6e5718845bb4b7b6b003b59c1c65fdd8">EmberAfRf4ceUserControlCode</a>&#160;</td>
          <td class="paramname"><em>rcCommandCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send indications of user control release to a pairing index. </p>
<p>This function can be called when a user control has been released and an indication of this should be sent to a remote node.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pairingIndex</td><td>The pairing index to which to send user control messages. </td></tr>
    <tr><td class="paramname">rcCommandCode</td><td>The RC command code of the user control.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ::EmberStatus value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8d27616dee38763a5d3e9ac00c3fe964"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EmberStatus emberAfRf4ceZrc11CommandDiscoveryRequest </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pairingIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a command discovery request to a pairing index. </p>
<p>This function can be called to discover which commands are supported by a remote node. The plugin will call <a class="el" href="group__rf4ce-zrc11-callbacks.htm#ga01f3609b3e82d202ead39da11054aaaf" title="Command Discovery Response.">emberAfPluginRf4ceZrc11CommandDiscoveryResponseCallback</a> when the response is received.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pairingIndex</td><td>The pairing index to which to the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An ::EmberStatus value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a class="anchor" id="ga69abf6654666d0e2ed81a439905f9e3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* emberAfRf4ceZrcCommandsSupportedContents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberAfRf4ceZrcCommandsSupported.htm">EmberAfRf4ceZrcCommandsSupported</a> *&#160;</td>
          <td class="paramname"><em>commandsSupported</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accesses the actual command discovery data of the <a class="el" href="structEmberAfRf4ceZrcCommandsSupported.htm" title="This data structure contains the ZRC 1.x command discovery data.">EmberAfRf4ceZrcCommandsSupported</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag</td><td>A pointer to an <a class="el" href="structEmberAfRf4ceZrcCommandsSupported.htm" title="This data structure contains the ZRC 1.x command discovery data.">EmberAfRf4ceZrcCommandsSupported</a> structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a pointer to the first byte of the command discovery value. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<hr size="1">
<table border="0" cellspacing="0" cellpadding="0" width=100%>
<tr>
<td><address><small>
Application Framework API Reference. Ember ZigBee RF4CE Application Framework.
</small></address>
</td>
<td align="right">
<address><small>
</small></address>
</td>
</tr>
</table>
</body>
</html>
