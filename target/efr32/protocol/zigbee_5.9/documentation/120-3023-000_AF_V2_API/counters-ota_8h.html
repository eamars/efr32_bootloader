<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Application Framework API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td><img src="SiliconLabsLogo_Black.jpg" style="padding: 10px;width:40%;height:40%;" /></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Application Framework API Reference
   &#160;<span id="projectnumber">Application Framework V2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('counters-ota_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">counters-ota.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="counters-ota_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a514a85c5de1504a471911a4beb143cb5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="counters-ota_8h.html#a514a85c5de1504a471911a4beb143cb5">MAX_PAYLOAD_LENGTH</a></td></tr>
<tr class="separator:a514a85c5de1504a471911a4beb143cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac43d532ab377362aa80267911078feeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ember__types.html#gacff561a945530f3039d6715958418ab8">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="counters-ota_8h.html#ac43d532ab377362aa80267911078feeb">emberAfPluginCountersSendRequest</a> (<a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a> destination, bool clearCounters)</td></tr>
<tr class="separator:ac43d532ab377362aa80267911078feeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e157dd193cc998aa56cb0fd299abc5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="counters-ota_8h.html#a81e157dd193cc998aa56cb0fd299abc5">emberAfPluginCountersIsIncomingRequest</a> (<a class="el" href="structEmberApsFrame.html">EmberApsFrame</a> *apsFrame, <a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a> sender)</td></tr>
<tr class="separator:a81e157dd193cc998aa56cb0fd299abc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62549e1ae97cdaf5f0c7776c3f643331"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="counters-ota_8h.html#a62549e1ae97cdaf5f0c7776c3f643331">emberAfPluginCountersIsIncomingResponse</a> (<a class="el" href="structEmberApsFrame.html">EmberApsFrame</a> *apsFrame)</td></tr>
<tr class="separator:a62549e1ae97cdaf5f0c7776c3f643331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e860c289b39ffeb30b5e27f51d2d0ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="counters-ota_8h.html#a6e860c289b39ffeb30b5e27f51d2d0ea">emberAfPluginCountersIsOutgoingResponse</a> (<a class="el" href="structEmberApsFrame.html">EmberApsFrame</a> *apsFrame, <a class="el" href="group__ember__types.html#gacff561a945530f3039d6715958418ab8">EmberStatus</a> status)</td></tr>
<tr class="separator:a6e860c289b39ffeb30b5e27f51d2d0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Description: A library for retrieving Ember stack counters over the air.</p>
<p>The library allows the application to request counters from a remote node. The request specifies whether the remote node should clear its counters after sending back the response. The library also handles and responds to incoming counter requests apropriately. A convenience method recognizes incoming responses.</p>
<p>Summary of requirements:</p>
<ul>
<li>Include counters.c and counters-ota.c in the build on an EmberZNet processor. Include only counters-ota-host.c in the build on an EZSP host processor.</li>
<li>Call ::emberIsIncomingCountersRequest() in the incoming message handler.</li>
<li>Call ::emberIsIncomingCountersResponse() in the incoming message handler.</li>
<li>Call ::emberIsOutgoingCountersResponse() in the message sent handler.</li>
</ul>
<p>The request and response messages use profile id EMBER_PRIVATE_PROFILE_ID, and the following cluster ids:</p>
<ul>
<li>EMBER_REPORT_COUNTERS_REQUEST</li>
<li>EMBER_REPORT_AND_CLEAR_COUNTERS_REQUEST</li>
<li>EMBER_REPORT_COUNTERS_RESPONSE</li>
<li>EMBER_REPORT_AND_CLEAR_COUNTERS_RESPONSE</li>
</ul>
<p>The request has no payload. The payload of the response is a list of the non-zero counters. Each entry in the list consists of the one-byte counter id followed by a two-byte counter, low byte first. If all entries do not fit into a single payload, multiple response messages are sent.</p>
<p>Copyright 2008 by Ember Corporation. All rights reserved. <em>80</em> </p>

<p>Definition in file <a class="el" href="counters-ota_8h_source.html">counters-ota.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a514a85c5de1504a471911a4beb143cb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PAYLOAD_LENGTH</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>To ensure the counters response does not exceed the maximum payload length, it is divided into separate messages if necessary. The maximum length of 48 leaves sufficient room for headers, all security modes, and source routing subframes if present. It should not be necessary to change this value, but if you do, make sure you know what you're doing. </p>

<p>Definition at line <a class="el" href="counters-ota_8h_source.html#l00042">42</a> of file <a class="el" href="counters-ota_8h_source.html">counters-ota.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac43d532ab377362aa80267911078feeb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ember__types.html#gacff561a945530f3039d6715958418ab8">EmberStatus</a> emberAfPluginCountersSendRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a>&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>clearCounters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends an request to the specified destination to send back a report of the non-zero counters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">destination</td><td>the address of the node to send the request to. </td></tr>
    <tr><td class="paramname">clearCounters</td><td>whether or not the destination should reset its counters to zero after successfully reporting them back to the requestor. Note that due to technical constraints, counters are always cleared on a network coprocessor such as the EM260. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EMBER_SUCCESS if the request was successfully submitted for sending. See ::emberSendUnicast() or ::ezspSendUnicast for possible failure statuses. </dd></dl>

</div>
</div>
<a class="anchor" id="a81e157dd193cc998aa56cb0fd299abc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberAfPluginCountersIsIncomingRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberApsFrame.html">EmberApsFrame</a> *&#160;</td>
          <td class="paramname"><em>apsFrame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#ga432acdaed32cc9f75e60d8610bab52ce">EmberNodeId</a>&#160;</td>
          <td class="paramname"><em>sender</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The application must call this function at the beginning of the incoming message handler. It returns true if the incoming message was a counters request and should be ignored by the rest of the incoming message handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">apsFrame</td><td>the APS frame passed to the incoming message handler. </td></tr>
    <tr><td class="paramname">sender</td><td>the node id of the sender of the request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message was a counters request and should be ignored by the rest of the incoming message handler. </dd></dl>

</div>
</div>
<a class="anchor" id="a62549e1ae97cdaf5f0c7776c3f643331"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberAfPluginCountersIsIncomingResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberApsFrame.html">EmberApsFrame</a> *&#160;</td>
          <td class="paramname"><em>apsFrame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The application may call this function within the incoming message handler to determine if the message is a counters response. If so, it is up to the application to decode the payload, whose format is described above.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">apsFrame</td><td>the APS frame passed to the incoming message handler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message is a counters response. </dd></dl>

</div>
</div>
<a class="anchor" id="a6e860c289b39ffeb30b5e27f51d2d0ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberAfPluginCountersIsOutgoingResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberApsFrame.html">EmberApsFrame</a> *&#160;</td>
          <td class="paramname"><em>apsFrame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#gacff561a945530f3039d6715958418ab8">EmberStatus</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The application must call this function at the begining of the message sent handler. It returns true if the message was a counters response and should be ignored by the rest of the handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">apsFrame</td><td>the APS frame passed to the message sent handler. </td></tr>
    <tr><td class="paramname">status</td><td>the status passed to the message sent handler. </td></tr>
    <tr><td class="paramname">return</td><td>true if the message was a counters response and should be ignored by the rest of the message sent handler. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<hr size="1">
<table border="0" cellspacing="0" cellpadding="0" width=100%>
<tr>
<td><address><small>
Application Framework API Reference. Application Framework V2.
</small></address>
</td>
<td align="right">
<address><small>
</small></address>
</td>
</tr>
</table>
</body>
</html>
